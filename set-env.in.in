#! /bin/bash

_w=${W:-tmp}
case $_w in
  /*)	;;
  *)	_w=@abs_top_builddir@/$_w;;
esac

_s=$_w/sysroots/`uname -m`-linux
: ${PYTHON:=@PYTHON@}
PATH=$PATH:/usr/local/sbin:/usr/sbin:/sbin:$_s/usr/bin
CCACHE_DIR=$_w/cache/ccache
BBPATH=@abs_top_builddir@
ELITO_METRICS_ID=$$
ELITO_PROJECT_NAME='@PROJECT_NAME@'
ELITO_SCRIPTS_DIR='@abs_top_srcdir@/scripts'


for i in "${!_@}" \
    ENV OPTS MAKEFLAGS MAKEOVERRIDES POSIXLY_CORRECT \
    ACLOCAL_FLAGS OSTYPE HOSTTYPE ARCH CPU BOARD VENDOR SOC \
    LD_LIBRARY_PATH LD_PRELOAD MAIL MAILCHECK MAILPATH \
    DIRSTACK OPTERR OPTIND SHLVL HOST HOSTFILE \
    PKG_CONFIG_PATH PYTHONSTARTUP PROFILEREAD \
; do
	eval unset "$i"
done

export ELITO_METRICS_ID
export CCACHE_DIR BBPATH

for f in @abs_top_builddir@/set-env.local $HOME/.elito-set-env; do
    test -r "$f" || continue
    . "$f"
done
