Index: lib/bb/cooker.py
===================================================================
--- lib/bb/cooker.py.orig
+++ lib/bb/cooker.py
@@ -950,8 +950,10 @@ class BBCooker:
                 newfiles.update(globbed)
 
         bbmask = bb.data.getVar('BBMASK', self.configuration.data, 1)
+        bbmask_basenames = (bb.data.getVar('BBMASK_BASENAMES',
+                                           self.configuration.data, 1) or "").split()
 
-        if not bbmask:
+        if not bbmask and not bbmask_basenames:
             return (list(newfiles), 0)
 
         try:
@@ -959,10 +961,18 @@ class BBCooker:
         except sre_constants.error:
             bb.msg.fatal(bb.msg.domain.Collection, "BBMASK is not a valid regular expression.")
 
+        bbmask_dict = {}
+        for f in bbmask_basenames:
+            if not f.endswith('.bb'):
+                f += '.bb'
+
+            bbmask_dict[f] = 1
+
         finalfiles = []
         maskedfiles = []
         for f in newfiles:
-            if bbmask_compiled.search(f):
+            f_base = os.path.basename(f)
+            if bbmask_dict.has_key(f_base) or bbmask_compiled.search(f):
                 bb.msg.debug(2, bb.msg.domain.Collection, "skipping masked file %s" % f)
                 if bb.msg.debug_level[bb.msg.domain.Collection] >= 1:
                     maskedfiles.append(f)
